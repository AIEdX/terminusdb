@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix tcs: <http://terminusdb.com/schema/tcs#> .
@prefix xdd: <http://terminusdb.com/schema/xdd#> .
@prefix terminus: <http://terminusdb.com/schema/terminus#> .

<http://terminusdb.com/schema/ref>
  a owl:Ontology ;
  rdfs:label "Terminus DB Reference Schema"@en ;
  rdfs:comment "Schema describing all of the structure of references (capabilities, roles, resources, users, databases)"@en ;
  tcs:rights "Copyright Data Chemist Ltd. 2017-2019"@en ;
  tcs:author "Gavin Mendel-Gleason"@en, "Kevin C. Feeney"@en;
  owl:imports <http://terminusdb.com/schema/layer> ;
  tcs:license <https://creativecommons.org/licenses/by-sa/2.0/>, <https://www.gnu.org/licenses/gpl-3.0.en.html> .

terminus:Branch
  a owl:Class ;
  rdf:subClassOf terminus:Ref ;
  rdfs:comment "This is a repo branch"@en ;
  rdfs:label "Branch"@en .

terminus:branch_name
  a owl:DatatypeProperty ;
  rdfs:comment "Name of a branch"@en ;
  rdfs:domain terminus:Branch ;
  rdfs:label "name"@en ;
  rdfs:range xsd:string .

terminus:instance
  a owl:ObjectProperty ;
  rdfs:comment "An instance graph of a branch"@en ;
  rdfs:domain terminus:Commit ;
  rdfs:label "instance"@en ;
  rdfs:range terminus:Layer .

terminus:schema
  a owl:ObjectProperty ;
  rdfs:comment "A schema graph of a branch"@en ;
  rdfs:domain terminus:Commit ;
  rdfs:label "schema"@en ;
  rdfs:range terminus:Layer .

terminus:inference
  a owl:ObjectProperty ;
  rdfs:comment "An inference graph of a branch"@en ;
  rdfs:domain terminus:Commit ;
  rdfs:label "inference"@en ;
  rdfs:range terminus:Layer .

terminus:Commit
  a owl:Class ;
  rdf:subClassOf terminus:UrCommit, terminus:Document, terminus:CommitParentRestriction, terminus:CommitTimestampRestriction, terminus:CommitAuthorRestriction ;
  rdfs:comment "This is a commit for a database"@en ;
  rdfs:label "Commit"@en .

terminus:CommitParentRestriction
  a owl:Restriction ;
  rdfs:comment "Commit has no more than 1 parent"@en ;
  rdfs:label "Commit Parent restriction"@en ;
  owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
  owl:onProperty terminus:parent .

terminus:Ref
  a owl:Class ;
  rdf:subClassOf terminus:Document, terminus:RefRestriction ;
  rdfs:comment "This is a ref for a commit"@en ;
  rdfs:label "Ref"@en .

terminus:RefRestriction
  a owl:Restriction ;
  rdfs:comment "Exactly one commit"@en ;
  rdfs:label "Ref Commit restriction"@en ;
  owl:cardinality "1"^^xsd:nonNegativeInteger ;
  owl:onProperty terminus:ref_commit .

terminus:Tag
  a owl:Class ;
  rdf:subClassOf terminus:Ref ;
  rdfs:comment "This is a tag for a commit"@en ;
  rdfs:label "Tag"@en .

terminus:CommitTimestampRestriction
  a owl:Restriction ;
  rdfs:comment "Only one timestamp per commit allowed"@en ;
  rdfs:label "Timestamp restriction"@en ;
  owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
  owl:onProperty terminus:commit_timestamp .

terminus:commit_author
  a owl:DatatypeProperty ;
  rdfs:comment "Author string for a commit"@en ;
  rdfs:domain terminus:Commit ;
  rdfs:label "Author"@en ;
  rdfs:range xsd:string .

terminus:commit_message
  a owl:DatatypeProperty ;
  rdfs:comment "Message string for a commit"@en ;
  rdfs:domain terminus:Commit ;
  rdfs:label "Message"@en ;
  rdfs:range xsd:string .

terminus:CommitAuthorRestriction
  a owl:Restriction ;
  rdfs:comment "Only one timestamp per commit allowed"@en ;
  rdfs:label "Timestamp restriction"@en ;
  owl:minCardinality "1"^^xsd:nonNegativeInteger ;
  owl:onProperty terminus:author .

terminus:commit_timestamp
  a owl:DatatypeProperty ;
  rdfs:comment "UNIX timestamp of the date and time of the commit"@en ;
  rdfs:domain terminus:Commit ;
  rdfs:label "Date and time"@en ;
  rdfs:range xsd:integer .

terminus:commit_parent
  a owl:ObjectProperty ;
  rdfs:comment "The parent of a commit"@en ;
  rdfs:domain terminus:Commit ;
  rdfs:label "parent"@en ;
  rdfs:range terminus:Commit .

terminus:UrCommit
  a owl:Class ;
  rdf:subClassOf terminus:Document ;
  rdfs:comment "This is a an object that can be a commit or nothing"@en ;
  rdfs:label "Tag"@en .

terminus:NoCommit
  a owl:Class ;
  rdf:subClassOf terminus:UrCommit ;
  rdfs:comment "This is a an object that can be a commit or nothing"@en ;
  rdfs:label "Tag"@en .

terminus:no_commit
  a terminus:NoCommit ;
  rdfs:comment "This object is used for newly created refs which have no associated commit"@en ;
  rdfs:label "No Commit"@en .

terminus:ref_commit
  a owl:ObjectProperty ;
  rdfs:comment "The commit associated with a ref"@en ;
  rdfs:domain terminus:Ref ;
  rdfs:label "commit"@en ;
  rdfs:range terminus:UrCommit .

terminus:ref_identifier
  a owl:DatatypeProperty ;
  rdfs:comment "The identifier associated with a ref"@en ;
  rdfs:domain terminus:Ref ;
  rdfs:label "identifier"@en ;
  rdfs:range xsd:string .
